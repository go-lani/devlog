3:I[5613,[],""]
5:I[31778,[],""]
7:I[45748,["250","static/chunks/250-9901ce03240cd556.js","597","static/chunks/597-bf6cacace1185e39.js","432","static/chunks/app/(blog)/layout-adc7174a87b4bac8.js"],""]
8:I[96796,["250","static/chunks/250-9901ce03240cd556.js","597","static/chunks/597-bf6cacace1185e39.js","432","static/chunks/app/(blog)/layout-adc7174a87b4bac8.js"],""]
9:I[85935,["837","static/chunks/837-744fdb3cd425f05c.js","185","static/chunks/app/layout-61829f58cdcb6925.js"],""]
a:I[90064,["837","static/chunks/837-744fdb3cd425f05c.js","185","static/chunks/app/layout-61829f58cdcb6925.js"],""]
4:["slug","snippet_use_visible_element","d"]
0:["D-7zl4-1SHomxV_YpoMdi",[[["",{"children":["(blog)",{"children":["snippet",{"children":[["slug","snippet_use_visible_element","d"],{"children":["__PAGE__?{\"slug\":\"snippet_use_visible_element\"}",{}]}]}]}]},"$undefined","$undefined",true],["",{"children":["(blog)",{"children":["snippet",{"children":[["slug","snippet_use_visible_element","d"],{"children":["__PAGE__",{},["$L1","$L2",null]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","(blog)","children","snippet","children","$4","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$L6","notFoundStyles":[],"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/fd736c728ec2597b.css","precedence":"next","crossOrigin":""}]]}]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","(blog)","children","snippet","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]]},[null,[["$","header",null,{"className":"container-layout border-style flex justify-center border-y bg-zinc-800","children":["$","div",null,{"className":"content-layout border-style flex items-center justify-between border-x","children":[["$","$L7",null,{}],["$","$L8",null,{}]]}]}],["$","main",null,{"className":"flex min-h-screen flex-col","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","(blog)","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]}],["$","footer",null,{"className":"__className_5899e0 container-layout border-style border-y bg-neutral-800","children":["$","div",null,{"className":"content-layout border-style border-x py-4","children":["$","p",null,{"className":"text-center text-xs font-bold text-app-white lg:text-sm","children":"© 2023 Lani. All Rights Reserved."}]}]}]],null]]},[null,["$","html",null,{"lang":"ko","children":[["$","$L9",null,{"id":"register-sw","strategy":"afterInteractive","dangerouslySetInnerHTML":{"__html":"\n            if ('serviceWorker' in navigator) {\n              window.addEventListener('load', function() {\n                navigator.serviceWorker.register('/sw.js').then(\n                  function(registration) {\n                    console.log('ServiceWorker registration successful');\n                  },\n                  function(err) {\n                    console.log('ServiceWorker registration failed: ', err);\n                  }\n                );\n              });\n            }\n          "}}],[["$","$L9",null,{"strategy":"afterInteractive","src":"https://www.googletagmanager.com/gtag/js?id=G-83PGP6B0HE"}],["$","$L9",null,{"id":"gtag-init","strategy":"afterInteractive","dangerouslySetInnerHTML":{"__html":"\n            window.dataLayer = window.dataLayer || [];\n            function gtag(){dataLayer.push(arguments);}\n            gtag('js', new Date());\n            gtag('config', 'G-83PGP6B0HE', {\n                page_path: window.location.pathname,\n            });\n          "}}]],["$","body",null,{"className":"__className_f8d089 px-[20px]","children":["$","div",null,{"id":"main-root","className":"mx-[-20px]","children":[["$","$La",null,{}],["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$Lb","notFoundStyles":[],"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/e191e9a994fc38cb.css","precedence":"next","crossOrigin":""}]]}]]}]}]]}],null]],[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/bdc2abfc067878e2.css","precedence":"next","crossOrigin":""}]],"$Lc"]]]]
d:I[25250,["250","static/chunks/250-9901ce03240cd556.js","332","static/chunks/app/(blog)/snippet/%5Bslug%5D/not-found-9d8fc62b84e17ff3.js"],""]
e:I[81749,["250","static/chunks/250-9901ce03240cd556.js","150","static/chunks/150-55743e6bbb9feb9a.js","255","static/chunks/255-2eec5b2650f4ad96.js","940","static/chunks/940-7cf8f47bf1d4cf55.js","360","static/chunks/app/(blog)/snippet/%5Bslug%5D/page-0ac2da38de48742d.js"],"Image"]
f:I[97569,["250","static/chunks/250-9901ce03240cd556.js","150","static/chunks/150-55743e6bbb9feb9a.js","255","static/chunks/255-2eec5b2650f4ad96.js","940","static/chunks/940-7cf8f47bf1d4cf55.js","360","static/chunks/app/(blog)/snippet/%5Bslug%5D/page-0ac2da38de48742d.js"],""]
10:I[15790,["250","static/chunks/250-9901ce03240cd556.js","150","static/chunks/150-55743e6bbb9feb9a.js","255","static/chunks/255-2eec5b2650f4ad96.js","940","static/chunks/940-7cf8f47bf1d4cf55.js","360","static/chunks/app/(blog)/snippet/%5Bslug%5D/page-0ac2da38de48742d.js"],""]
12:I[47365,["250","static/chunks/250-9901ce03240cd556.js","150","static/chunks/150-55743e6bbb9feb9a.js","255","static/chunks/255-2eec5b2650f4ad96.js","940","static/chunks/940-7cf8f47bf1d4cf55.js","360","static/chunks/app/(blog)/snippet/%5Bslug%5D/page-0ac2da38de48742d.js"],""]
6:["$","div",null,{"className":"container-layout bg-zinc-800","children":["$","div",null,{"className":"content-layout bg-neutral-800 text-app-white","children":["$","div",null,{"className":"flex flex-col items-center justify-center py-32","children":[["$","img",null,{"src":"/assets/images/icons/not.svg","className":"h-[80px] w-[80px]","alt":"series is empty"}],["$","p",null,{"className":"mt-6","children":"해당 포스트를 찾을 수 없어요"}],["$","$Ld",null,{"href":"/posts","className":"mt-2 flex items-center gap-2","children":[["$","p",null,{"children":"다른 포스트 보러가기"}],["$","img",null,{"src":"/assets/images/icons/right-arrow.svg","alt":"move to posts","className":"h-[18px] w-[18px]"}]]}]]}]}]}]
b:["$","div",null,{"className":"flex h-screen flex-col items-center justify-center bg-zinc-800 text-app-white","children":[["$","img",null,{"src":"/assets/images/icons/not-found.svg","alt":"page not found","className":"h-[128px] w-[128px]"}],["$","p",null,{"className":"mt-8 text-2xl","children":"페이지를 찾을 수 없어요"}],["$","$Ld",null,{"href":"/","className":"mt-2 flex items-center gap-2","children":[["$","p",null,{"children":"홈으로"}],["$","img",null,{"src":"/assets/images/icons/right-arrow.svg","alt":"move to home","className":"h-[18px] w-[18px]"}]]}]]}]
11:T1a55,/*@jsxRuntime automatic @jsxImportSource react*/
const {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];
const {useMDXComponents: _provideComponents} = arguments[0];
function _createMdxContent(props) {
  const _components = Object.assign({
    h2: "h2",
    a: "a",
    span: "span",
    p: "p",
    h3: "h3",
    pre: "pre",
    code: "code",
    strong: "strong",
    ol: "ol",
    li: "li"
  }, _provideComponents(), props.components);
  return _jsxs(_Fragment, {
    children: [_jsxs(_components.h2, {
      id: "usevisibleelement",
      children: [_jsx(_components.a, {
        "aria-hidden": "true",
        tabIndex: "-1",
        href: "#usevisibleelement",
        children: _jsx(_components.span, {
          className: "icon icon-link"
        })
      }), "useVisibleElement"]
    }), "\n", _jsx(_components.p, {
      children: "스크롤 시 해당 DOM 요소가 노출됬는지 여부 감지"
    }), "\n", _jsxs(_components.h3, {
      id: "hookslegacy",
      children: [_jsx(_components.a, {
        "aria-hidden": "true",
        tabIndex: "-1",
        href: "#hookslegacy",
        children: _jsx(_components.span, {
          className: "icon icon-link"
        })
      }), "Hooks(Legacy)"]
    }), "\n", _jsx(_components.pre, {
      children: _jsx(_components.code, {
        className: "language-tsx",
        children: "import { useCallback, useEffect, useRef, useState } from 'react';\n\nexport default function useVisibleElement<T extends HTMLElement>(): {\n  ref: React.RefObject<T>;\n  isVisible: boolean;\n} {\n  const [isVisible, setIsVisible] = useState<boolean>(false);\n  const ref = useRef<T>(null);\n\n  const checkVisibility = useCallback(() => {\n    if (ref.current) {\n      const rect = ref.current.getBoundingClientRect();\n\n      if (rect.top < window.innerHeight - 300 && rect.bottom > 0) {\n        setIsVisible(true);\n      } else {\n        setIsVisible(false);\n      }\n    }\n  }, []);\n\n  useEffect(() => {\n    window.addEventListener('scroll', checkVisibility);\n    window.addEventListener('touchmove', checkVisibility);\n\n    checkVisibility();\n\n    return () => {\n      window.removeEventListener('scroll', checkVisibility);\n      window.removeEventListener('touchmove', checkVisibility);\n    };\n  }, [checkVisibility]);\n\n  return { ref, isVisible };\n}\n"
      })
    }), "\n", _jsxs(_components.h3, {
      id: "hooksintersectionobserver-api-사용",
      children: [_jsx(_components.a, {
        "aria-hidden": "true",
        tabIndex: "-1",
        href: "#hooksintersectionobserver-api-사용",
        children: _jsx(_components.span, {
          className: "icon icon-link"
        })
      }), "Hooks(intersectionObserver API 사용)"]
    }), "\n", _jsx(_components.p, {
      children: "intersectionObserver API를 사용하며 Hook의 기능을 추가/변경했다."
    }), "\n", _jsx(_components.p, {
      children: _jsx(_components.strong, {
        children: "Props"
      })
    }), "\n", _jsxs(_components.ol, {
      children: ["\n", _jsx(_components.li, {
        children: "activeClass: 해당 요소가 노출될 때 추가할 클래스명"
      }), "\n", _jsx(_components.li, {
        children: "key: 추적 요소의 고유 키값 부여"
      }), "\n"]
    }), "\n", _jsx(_components.p, {
      children: _jsx(_components.strong, {
        children: "Return"
      })
    }), "\n", _jsxs(_components.ol, {
      children: ["\n", _jsxs(_components.li, {
        children: ["ref: 추적할 요소를 가진 ", _jsx("b", {
          children: "container(div tag)"
        }), "를 ref로 지정하기 위함"]
      }), "\n", _jsx(_components.li, {
        children: "activeKey: 현재 노출된 요소의 키값"
      }), "\n", _jsx(_components.li, {
        children: "activeElement: 현재 노출된 Element 요소"
      }), "\n"]
    }), "\n", _jsx(_components.pre, {
      children: _jsx(_components.code, {
        className: "language-tsx",
        children: "import { useEffect, useRef, useState } from 'react';\n\ninterface Props {\n  key?: string;\n  activeClass?: string;\n}\n\nexport default function useVisibleElement(props?: Props) {\n  const { key = 'visible-element', activeClass } = props || {};\n\n  const [activeKey, setActiveKey] = useState<string>('');\n  const [activeElement, setActiveElement] = useState<Element | null>(null);\n  const ref = useRef<HTMLDivElement>(null);\n\n  const callback = (entries: IntersectionObserverEntry[]) => {\n    entries.forEach((entry) => {\n      const key = entry.target.getAttribute('data-key');\n\n      if (entry.isIntersecting) {\n        if (activeClass) {\n          entry.target.classList.add(activeClass);\n        }\n\n        setActiveKey(key || '');\n        setActiveElement(entry.target);\n      } else if (activeClass) {\n        entry.target.classList.remove(activeClass);\n      }\n    });\n  };\n\n  useEffect(() => {\n    const intersectionObserver = new IntersectionObserver(callback);\n\n    const scrollItems = Array.from(ref.current?.children as HTMLCollection);\n\n    if (!scrollItems?.length) return () => {};\n\n    scrollItems.forEach((item, index) => {\n      item.setAttribute('data-key', `${key}-${index}`);\n      intersectionObserver.observe(item);\n    });\n\n    return () => {\n      intersectionObserver.disconnect();\n    };\n  }, []);\n\n  return {\n    ref,\n    activeKey,\n    activeElement,\n  };\n}\n"
      })
    }), "\n", _jsxs(_components.h3, {
      id: "usage",
      children: [_jsx(_components.a, {
        "aria-hidden": "true",
        tabIndex: "-1",
        href: "#usage",
        children: _jsx(_components.span, {
          className: "icon icon-link"
        })
      }), "Usage"]
    }), "\n", _jsx(_components.pre, {
      children: _jsx(_components.code, {
        className: "language-tsx",
        children: "function Component() {\n  const { ref, activeKey, activeElement } = useVisibleElement({\n    activeClass: 'active',\n  });\n  console.log('activeKey', activeKey); // scroll-item-0\n  console.log('activeElement', activeElement); // <section><p>section 1</p></section>\n\n  return (\n    <div ref={ref}>\n      <section>\n        <p>section 1</p>\n      </section>\n      <section>\n        <p>section 2</p>\n      </section>\n      <section>\n        <p>section 3</p>\n      </section>\n      <section>\n        <p>section 4</p>\n      </section>\n    </div>\n  );\n}\n"
      })
    })]
  });
}
function MDXContent(props = {}) {
  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);
  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {
    children: _jsx(_createMdxContent, props)
  })) : _createMdxContent(props);
}
return {
  default: MDXContent
};
2:[["$","section",null,{"className":"container-layout border-style grow-0 border-b bg-zinc-800","children":["$","div",null,{"className":"content-layout border-style relative justify-center border-x text-center text-app-white","children":["$","div",null,{"className":"flex flex-col justify-center px-4 py-16 lg:px-5 lg:py-20","children":["$undefined",["$","h1",null,{"className":"text-xl lg:text-4xl","children":"useVisibleElement"}]]}]}]}],["$","section",null,{"className":"container-layout border-style grow-0 border-b bg-zinc-800","children":["$","div",null,{"className":"content-layout","children":["$","div",null,{"className":"border-style align-center flex justify-center border-x text-app-white lg:justify-start lg:text-center","children":[["$","p",null,{"className":"border-style border-l p-5 text-sm lg:border-l-0","children":"2023-10-18"}],["$","p",null,{"className":"border-style flex items-center justify-center gap-1 border-x p-5 text-sm","children":[["$","$Le",null,{"src":"/assets/images/icons/timer.svg","width":21,"height":21,"alt":""}],"약 ",2,"분"]}]]}]}]}],["$","section",null,{"className":"container-layout bg-zinc-800","children":["$","div",null,{"className":"content-layout border-style flex flex-col border-x","children":["$","div",null,{"className":"flex","children":[["$","$Lf",null,{"toc":[{"level":2,"title":"useVisibleElement","href":"#usevisibleelement","children":[{"level":3,"title":"Hooks(Legacy)","href":"#hookslegacy"},{"level":3,"title":"Hooks(intersectionObserver API 사용)","href":"#hooksintersectionobserver-api-사용"},{"level":3,"title":"Usage","href":"#usage"}]}],"tags":["hooks","DOM API"]}],["$","div",null,{"className":"flex w-full flex-col bg-neutral-800 xl:w-[742px]","children":[["$","$L10",null,{"serialized":{"compiledSource":"$11","frontmatter":{},"scope":{}}}],"$undefined",["$","div",null,{"className":"flex-between border-style mt-auto flex border-t bg-zinc-800 text-app-white","children":[["$","div",null,{"className":"border-style flex w-[50%] p-4","children":["$","$Ld",null,{"href":"/snippet/snippet_use_scroll_lock","className":"flex gap-4","children":[["$","span",null,{"children":["$","img",null,{"src":"/assets/images/icons/left-arrow.svg","alt":"prev","className":"h-[18px] w-[18px]"}]}],["$","div",null,{"className":"flex flex-col items-start gap-1","children":[["$","p",null,{"className":"text-sm text-neutral-500","children":"prev"}],["$","p",null,{"className":"max-w-[120px] truncate text-neutral-300 lg:max-w-[200px]","children":["useScrollLock","useScrollLock","useScrollLock"]}]]}]]}]}],["$","div",null,{"className":"flex w-[50%] justify-end p-4","children":null}]]}],["$","$L12",null,{}]]}]]}]}]}]]
c:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Lani.log | useVisibleElement"}],["$","meta","3",{"name":"description","content":"스크롤시 해당 DOM 요소가 노출됬는지 여부 감지"}],["$","link","4",{"rel":"manifest","href":"/manifest.webmanifest"}],["$","meta","5",{"property":"og:title","content":"Lani.log"}],["$","meta","6",{"property":"og:description","content":"Developer Lani's log"}],["$","meta","7",{"property":"og:image","content":"https://laniground.com/og-image.jpg"}],["$","meta","8",{"property":"og:type","content":"website"}],["$","meta","9",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","10",{"name":"twitter:title","content":"Lani.log"}],["$","meta","11",{"name":"twitter:description","content":"Developer Lani's log"}],["$","meta","12",{"name":"twitter:image","content":"https://laniground.com/og-image.jpg"}],["$","link","13",{"rel":"shortcut icon","href":"/icon/shortcut-icon.png"}],["$","link","14",{"rel":"icon","href":"/favicon.ico"}],["$","link","15",{"rel":"apple-touch-icon","href":"/icon/shortcut-icon.png"}]]
1:null
