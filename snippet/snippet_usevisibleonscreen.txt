1:HL["/_next/static/css/a05b8bba4771981b.css",{"as":"style"}]
0:["Wz56-7bKwXi9HRS1abvIV",[[["",{"children":["(blog)",{"children":["snippet",{"children":[["slug","snippet_usevisibleonscreen","d"],{"children":["__PAGE__?{\"slug\":\"snippet_usevisibleonscreen\"}",{}]}]}]}]},"$undefined","$undefined",true],"$L2",[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/a05b8bba4771981b.css","precedence":"next"}]],"$L3"]]]]
4:HL["/_next/static/css/c9b2022872d5ba0f.css",{"as":"style"}]
5:I{"id":83015,"chunks":["185:static/chunks/app/layout-7e656d26eb10f00f.js"],"name":"","async":false}
6:I{"id":47767,"chunks":["272:static/chunks/webpack-6834df56d23ce573.js","971:static/chunks/fd9d1056-ef33cd78b8d8878c.js","596:static/chunks/596-6a9d4376673ce765.js"],"name":"default","async":false}
7:I{"id":57920,"chunks":["272:static/chunks/webpack-6834df56d23ce573.js","971:static/chunks/fd9d1056-ef33cd78b8d8878c.js","596:static/chunks/596-6a9d4376673ce765.js"],"name":"default","async":false}
9:I{"id":73630,"chunks":["685:static/chunks/685-4f0f72178562bcc6.js","213:static/chunks/213-a74268289aee7be5.js","432:static/chunks/app/(blog)/layout-0e056d20d2dd02af.js"],"name":"","async":false}
a:I{"id":12531,"chunks":["685:static/chunks/685-4f0f72178562bcc6.js","213:static/chunks/213-a74268289aee7be5.js","432:static/chunks/app/(blog)/layout-0e056d20d2dd02af.js"],"name":"","async":false}
3:[["$","meta","0",{"charSet":"utf-8"}],["$","title","1",{"children":"라니.로그 | useVisibleOnScreen"}],["$","meta","2",{"name":"description","content":"스크롤시 해당 DOM 요소가 노출됬는지 여부 감지"}],["$","meta","3",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","4",{"property":"og:title","content":"라니.로그"}],["$","meta","5",{"property":"og:description","content":"프론트엔드 개발자 라니의 로그기록"}],["$","meta","6",{"property":"og:image","content":"https://laniground.com/og-image.jpg"}],["$","meta","7",{"property":"og:type","content":"website"}],["$","meta","8",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","9",{"name":"twitter:title","content":"라니.로그"}],["$","meta","10",{"name":"twitter:description","content":"프론트엔드 개발자 라니의 로그기록"}],["$","meta","11",{"name":"twitter:image","content":"https://laniground.com/og-image.jpg"}],["$","link","12",{"rel":"shortcut icon","href":"/icon/shortcut-icon.png"}],["$","link","13",{"rel":"icon","href":"/favicon.ico"}],["$","link","14",{"rel":"apple-touch-icon","href":"/icon/shortcut-icon.png"}]]
2:[null,["$","html",null,{"lang":"ko","children":[[["$","$L5",null,{"strategy":"afterInteractive","src":"https://www.googletagmanager.com/gtag/js?id=G-83PGP6B0HE"}],["$","$L5",null,{"id":"gtag-init","strategy":"afterInteractive","dangerouslySetInnerHTML":{"__html":"\n            window.dataLayer = window.dataLayer || [];\n            function gtag(){dataLayer.push(arguments);}\n            gtag('js', new Date());\n            gtag('config', 'G-83PGP6B0HE', {\n                page_path: window.location.pathname,\n            });\n          "}}]],["$","body",null,{"className":"__className_f8d089 px-[20px]","children":[["$","div",null,{"id":"main-root","className":"mx-[-20px]","children":["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","template":["$","$L7",null,{}],"templateStyles":"$undefined","notFound":"$L8","notFoundStyles":[],"childProp":{"current":[null,[["$","header",null,{"className":"container-layout border-style flex justify-center border-y bg-zinc-800","children":["$","div",null,{"className":"content-layout border-style flex items-center justify-between border-x","children":[["$","$L9",null,{}],["$","$La",null,{}]]}]}],["$","main",null,{"className":"flex min-h-screen flex-col","children":["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children","(blog)","children"],"loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","template":["$","$L7",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children","(blog)","children","snippet","children"],"loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","template":["$","$L7",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children","(blog)","children","snippet","children",["slug","snippet_usevisibleonscreen","d"],"children"],"loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","template":["$","$L7",null,{}],"templateStyles":"$undefined","notFound":"$Lb","notFoundStyles":[],"childProp":{"current":["$Lc","$Ld",null],"segment":"__PAGE__?{\"slug\":\"snippet_usevisibleonscreen\"}"},"styles":[]}],"segment":["slug","snippet_usevisibleonscreen","d"]},"styles":[]}],"segment":"snippet"},"styles":[]}]}],["$","footer",null,{"className":"__className_829659 container-layout border-style border-y bg-neutral-800","children":["$","div",null,{"className":"content-layout border-style border-x py-4","children":["$","p",null,{"className":"text-center text-xs font-bold text-app-white md:text-sm","children":"© 2023 Lani. All Rights Reserved."}]}]}]],null],"segment":"(blog)"},"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/c9b2022872d5ba0f.css","precedence":"next"}]]}]}],["$","div",null,{"id":"modal-root"}]]}]]}],null]
e:I{"id":46685,"chunks":["685:static/chunks/685-4f0f72178562bcc6.js","332:static/chunks/app/(blog)/snippet/[slug]/not-found-3653929c86b80cfb.js"],"name":"","async":false}
f:I{"id":63222,"chunks":["685:static/chunks/685-4f0f72178562bcc6.js","689:static/chunks/689-c362d09a36554168.js","429:static/chunks/429-9331f31795d16fdd.js","360:static/chunks/app/(blog)/snippet/[slug]/page-1caeb5a1009cfb0a.js"],"name":"Image","async":false}
10:I{"id":33429,"chunks":["685:static/chunks/685-4f0f72178562bcc6.js","689:static/chunks/689-c362d09a36554168.js","429:static/chunks/429-9331f31795d16fdd.js","360:static/chunks/app/(blog)/snippet/[slug]/page-1caeb5a1009cfb0a.js"],"name":"","async":false}
11:I{"id":59944,"chunks":["685:static/chunks/685-4f0f72178562bcc6.js","689:static/chunks/689-c362d09a36554168.js","429:static/chunks/429-9331f31795d16fdd.js","360:static/chunks/app/(blog)/snippet/[slug]/page-1caeb5a1009cfb0a.js"],"name":"","async":false}
12:I{"id":23758,"chunks":["685:static/chunks/685-4f0f72178562bcc6.js","689:static/chunks/689-c362d09a36554168.js","429:static/chunks/429-9331f31795d16fdd.js","360:static/chunks/app/(blog)/snippet/[slug]/page-1caeb5a1009cfb0a.js"],"name":"","async":false}
15:I{"id":6832,"chunks":["685:static/chunks/685-4f0f72178562bcc6.js","689:static/chunks/689-c362d09a36554168.js","429:static/chunks/429-9331f31795d16fdd.js","360:static/chunks/app/(blog)/snippet/[slug]/page-1caeb5a1009cfb0a.js"],"name":"","async":false}
8:["$","div",null,{"className":"flex h-screen flex-col items-center justify-center bg-zinc-800 text-app-white","children":[["$","img",null,{"src":"/assets/images/icons/not-found.svg","alt":"page not found","className":"h-[128px] w-[128px]"}],["$","p",null,{"className":"mt-8 text-2xl","children":"페이지를 찾을 수 없어요"}],["$","$Le",null,{"href":"/","className":"mt-2 flex items-center gap-2","children":[["$","p",null,{"children":"홈으로"}],["$","img",null,{"src":"/assets/images/icons/right-arrow.svg","alt":"move to home","className":"h-[18px] w-[18px]"}]]}]]}]
b:["$","div",null,{"className":"container-layout bg-zinc-800","children":["$","div",null,{"className":"content-layout bg-neutral-800 text-app-white","children":["$","div",null,{"className":"flex flex-col items-center justify-center py-32","children":[["$","img",null,{"src":"/assets/images/icons/not.svg","className":"h-[80px] w-[80px]","alt":"series is empty"}],["$","p",null,{"className":"mt-6","children":"해당 포스트를 찾을 수 없어요"}],["$","$Le",null,{"href":"/posts","className":"mt-2 flex items-center gap-2","children":[["$","p",null,{"children":"다른 포스트 보러가기"}],["$","img",null,{"src":"/assets/images/icons/right-arrow.svg","alt":"move to posts","className":"h-[18px] w-[18px]"}]]}]]}]}]}]
13:T5cc,import { useEffect, useRef, useState } from 'react';  
  
interface Props {  
  key?: string;  
  activeClass?: string;  
}  
  
export default function useVisibleOnScreen(props?: Props) {  
  const { key = 'scroll-item', activeClass } = props || {};  
  
  const [activeKey, setActiveKey] = useState<string>('');  
  const [activeElement, setActiveElement] = useState<Element | null>(null);  
  const ref = useRef<HTMLDivElement>(null);  
  
  const callback = (entries: IntersectionObserverEntry[]) => {  
    entries.forEach((entry) => {  
      const key = entry.target.getAttribute('data-key');  
  
      if (entry.isIntersecting) {  
        if (activeClass) {  
          entry.target.classList.add(activeClass);  
        }  
  
        setActiveKey(key || '');  
        setActiveElement(entry.target);  
      } else if (activeClass) {  
        entry.target.classList.remove(activeClass);  
      }  
    });  
  };  
  
  useEffect(() => {  
    const intersectionObserver = new IntersectionObserver(callback);  
  
    const scrollItems = Array.from(ref.current?.children as HTMLCollection);  
  
    if (!scrollItems?.length) return () => {};  
  
    scrollItems.forEach((item, index) => {  
      item.setAttribute('data-key', `${key}-${index}`);  
      intersectionObserver.observe(item);  
    });  
  
    return () => {  
      intersectionObserver.disconnect();  
    };  
  }, []);  
  
  return {  
    ref,  
    activeKey,  
    activeElement,  
  };  
}  
14:T5cc,import { useEffect, useRef, useState } from 'react';  
  
interface Props {  
  key?: string;  
  activeClass?: string;  
}  
  
export default function useVisibleOnScreen(props?: Props) {  
  const { key = 'scroll-item', activeClass } = props || {};  
  
  const [activeKey, setActiveKey] = useState<string>('');  
  const [activeElement, setActiveElement] = useState<Element | null>(null);  
  const ref = useRef<HTMLDivElement>(null);  
  
  const callback = (entries: IntersectionObserverEntry[]) => {  
    entries.forEach((entry) => {  
      const key = entry.target.getAttribute('data-key');  
  
      if (entry.isIntersecting) {  
        if (activeClass) {  
          entry.target.classList.add(activeClass);  
        }  
  
        setActiveKey(key || '');  
        setActiveElement(entry.target);  
      } else if (activeClass) {  
        entry.target.classList.remove(activeClass);  
      }  
    });  
  };  
  
  useEffect(() => {  
    const intersectionObserver = new IntersectionObserver(callback);  
  
    const scrollItems = Array.from(ref.current?.children as HTMLCollection);  
  
    if (!scrollItems?.length) return () => {};  
  
    scrollItems.forEach((item, index) => {  
      item.setAttribute('data-key', `${key}-${index}`);  
      intersectionObserver.observe(item);  
    });  
  
    return () => {  
      intersectionObserver.disconnect();  
    };  
  }, []);  
  
  return {  
    ref,  
    activeKey,  
    activeElement,  
  };  
}  
d:[["$","section",null,{"className":"container-layout border-style grow-0 border-b bg-zinc-800","children":["$","div",null,{"className":"content-layout border-style relative justify-center border-x text-center text-app-white","children":["$","div",null,{"className":"flex flex-col justify-center px-4 py-16 md:px-5 md:py-20","children":[["$","p",null,{"className":"mb-3 text-sm","children":["snippet"," ","$undefined"]}],["$","h1",null,{"className":"text-xl md:text-4xl","children":"useVisibleOnScreen"}]]}]}]}],["$","section",null,{"className":"container-layout border-style grow-0 border-b bg-zinc-800","children":["$","div",null,{"className":"content-layout","children":["$","div",null,{"className":"border-style align-center flex justify-center border-x text-app-white md:justify-start md:text-center","children":[["$","p",null,{"className":"border-style border-l p-5 text-sm md:border-l-0","children":"2023-10-18"}],["$","p",null,{"className":"border-style flex items-center justify-center gap-1 border-x p-5 text-sm","children":[["$","$Lf",null,{"src":"/assets/images/icons/timer.svg","width":21,"height":21,"alt":""}],"약 ",2,"분"]}]]}]}]}],["$","section",null,{"className":"container-layout bg-zinc-800","children":["$","div",null,{"className":"content-layout border-style flex flex-col border-x","children":["$","div",null,{"className":"flex","children":[["$","$L10",null,{"toc":[{"level":2,"title":"useVisibleOnScreen","href":"#usevisibleonscreen","children":[{"level":3,"title":"Hooks(Legacy)","href":"#hookslegacy"},{"level":3,"title":"Hooks(intersectionObserver API 사용)","href":"#hooksintersectionobserver-api-사용"},{"level":3,"title":"Usage","href":"#usage"}]}],"tags":["hooks","DOM API"]}],["$","div",null,{"className":"flex w-full flex-col bg-neutral-800 lg:w-[742px]","children":[["$","$L11",null,{"children":["$","div",null,{"className":"markdown-viewer box-border w-full bg-neutral-800 p-4 text-app-white md:p-5","children":[["$","h2","0",{"id":"usevisibleonscreen","children":[["$","a","0",{"aria-hidden":"true","tabIndex":-1,"href":"#usevisibleonscreen","children":[["$","span","0",{"className":"icon icon-link"}]]}],"useVisibleOnScreen"]}],"\n",["$","p","2",{"children":["스크롤 시 해당 DOM 요소가 노출됬는지 여부 감지"]}],"\n",["$","h3","4",{"id":"hookslegacy","children":[["$","a","0",{"aria-hidden":"true","tabIndex":-1,"href":"#hookslegacy","children":[["$","span","0",{"className":"icon icon-link"}]]}],"Hooks(Legacy)"]}],"\n",["$","pre","6",{"children":[["$","$L12",null,{"node":{"type":"element","tagName":"code","properties":{"className":["language-tsx"]},"children":[{"type":"text","value":"import { useCallback, useEffect, useRef, useState } from 'react';  \n  \nexport default function useVisibleOnScreen<T extends HTMLElement>(): {  \n  ref: React.RefObject<T>;  \n  isVisible: boolean;  \n} {  \n  const [isVisible, setIsVisible] = useState<boolean>(false);  \n  const ref = useRef<T>(null);  \n  \n  const checkVisibility = useCallback(() => {  \n    if (ref.current) {  \n      const rect = ref.current.getBoundingClientRect();  \n  \n      if (rect.top < window.innerHeight - 300 && rect.bottom > 0) {  \n        setIsVisible(true);  \n      } else {  \n        setIsVisible(false);  \n      }  \n    }  \n  }, []);  \n  \n  useEffect(() => {  \n    window.addEventListener('scroll', checkVisibility);  \n    window.addEventListener('touchmove', checkVisibility);  \n  \n    checkVisibility();  \n  \n    return () => {  \n      window.removeEventListener('scroll', checkVisibility);  \n      window.removeEventListener('touchmove', checkVisibility);  \n    };  \n  }, [checkVisibility]);  \n  \n  return { ref, isVisible };  \n}  \n"}],"position":{"start":{"line":8,"column":1,"offset":87},"end":{"line":44,"column":6,"offset":1115}}},"children":["import { useCallback, useEffect, useRef, useState } from 'react';  \n  \nexport default function useVisibleOnScreen<T extends HTMLElement>(): {  \n  ref: React.RefObject<T>;  \n  isVisible: boolean;  \n} {  \n  const [isVisible, setIsVisible] = useState<boolean>(false);  \n  const ref = useRef<T>(null);  \n  \n  const checkVisibility = useCallback(() => {  \n    if (ref.current) {  \n      const rect = ref.current.getBoundingClientRect();  \n  \n      if (rect.top < window.innerHeight - 300 && rect.bottom > 0) {  \n        setIsVisible(true);  \n      } else {  \n        setIsVisible(false);  \n      }  \n    }  \n  }, []);  \n  \n  useEffect(() => {  \n    window.addEventListener('scroll', checkVisibility);  \n    window.addEventListener('touchmove', checkVisibility);  \n  \n    checkVisibility();  \n  \n    return () => {  \n      window.removeEventListener('scroll', checkVisibility);  \n      window.removeEventListener('touchmove', checkVisibility);  \n    };  \n  }, [checkVisibility]);  \n  \n  return { ref, isVisible };  \n}  \n"],"language":"tsx"}]]}],"\n",["$","h3","8",{"id":"hooksintersectionobserver-api-사용","children":[["$","a","0",{"aria-hidden":"true","tabIndex":-1,"href":"#hooksintersectionobserver-api-사용","children":[["$","span","0",{"className":"icon icon-link"}]]}],"Hooks(intersectionObserver API 사용)"]}],"\n",["$","p","10",{"children":["intersectionObserver API를 사용하며 Hook의 기능을 추가/변경했다."]}],"\n",["$","p","12",{"children":[["$","strong","0",{"children":["Props"]}]]}],"\n",["$","ol","14",{"children":["\n",["$","li","1",{"children":["activeClass: 해당 요소가 노출될 때 추가할 클래스명"]}],"\n",["$","li","3",{"children":["key: 추적 요소의 고유 키값 부여"]}],"\n"]}],"\n",["$","p","16",{"children":[["$","strong","0",{"children":["Return"]}]]}],"\n",["$","ol","18",{"children":["\n",["$","li","1",{"children":["ref: 추적할 요소를 가진 *container(div tag)**를 ref로 지정하기 위함"]}],"\n",["$","li","3",{"children":["activeKey: 현재 노출된 요소의 키값"]}],"\n",["$","li","5",{"children":["activeElement: 현재 노출된 Element 요소"]}],"\n"]}],"\n",["$","pre","20",{"children":[["$","$L12",null,{"node":{"type":"element","tagName":"code","properties":{"className":["language-tsx"]},"children":[{"type":"text","value":"$13"}],"position":{"start":{"line":61,"column":1,"offset":1449},"end":{"line":116,"column":6,"offset":2947}}},"children":["$14"],"language":"tsx"}]]}],"\n",["$","h3","22",{"id":"usage","children":[["$","a","0",{"aria-hidden":"true","tabIndex":-1,"href":"#usage","children":[["$","span","0",{"className":"icon icon-link"}]]}],"Usage"]}],"\n",["$","pre","24",{"children":[["$","$L12",null,{"node":{"type":"element","tagName":"code","properties":{"className":["language-tsx"]},"children":[{"type":"text","value":"function Component() {  \n  const { ref, activeKey, activeElement } = useVisibleOnScreen({  \n    activeClass: 'active',  \n  });  \n  console.log('activeKey', activeKey); // scroll-item-0  \n  console.log('activeElement', activeElement); // <section><p>section 1</p></section>  \n  \n  return (  \n    <div ref={ref}>  \n      <section>  \n        <p>section 1</p>  \n      </section>  \n      <section>  \n        <p>section 2</p>  \n      </section>  \n      <section>  \n        <p>section 3</p>  \n      </section>  \n      <section>  \n        <p>section 4</p>  \n      </section>  \n    </div>  \n  );  \n}  \n"}],"position":{"start":{"line":120,"column":1,"offset":2966},"end":{"line":145,"column":6,"offset":3573}}},"children":["function Component() {  \n  const { ref, activeKey, activeElement } = useVisibleOnScreen({  \n    activeClass: 'active',  \n  });  \n  console.log('activeKey', activeKey); // scroll-item-0  \n  console.log('activeElement', activeElement); // <section><p>section 1</p></section>  \n  \n  return (  \n    <div ref={ref}>  \n      <section>  \n        <p>section 1</p>  \n      </section>  \n      <section>  \n        <p>section 2</p>  \n      </section>  \n      <section>  \n        <p>section 3</p>  \n      </section>  \n      <section>  \n        <p>section 4</p>  \n      </section>  \n    </div>  \n  );  \n}  \n"],"language":"tsx"}]]}]]}]}],false,["$","div",null,{"className":"flex-between border-style mt-auto flex border-t bg-zinc-800 text-app-white","children":[["$","div",null,{"className":"border-style flex w-[50%] p-4","children":["$","$Le",null,{"href":"/snippet/snippet_usescrolllock","className":"flex gap-4","children":[["$","span",null,{"children":["$","img",null,{"src":"/assets/images/icons/left-arrow.svg","alt":"prev","className":"h-[18px] w-[18px]"}]}],["$","div",null,{"className":"flex flex-col items-start gap-1","children":[["$","p",null,{"className":"text-sm text-neutral-500","children":"prev"}],["$","p",null,{"className":"max-w-[120px] truncate text-neutral-300 md:max-w-[200px]","children":["useScrollLock","useScrollLock","useScrollLock"]}]]}]]}]}],["$","div",null,{"className":"flex w-[50%] justify-end p-4","children":null}]]}],["$","$L15",null,{}]]}]]}]}]}]]
c:null
